
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>FriendFinder</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Font Awesome Glyphicons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

	<!-- Chosen -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>
<body>

	<div class="container">

		<h2>Survey Questions</h2>
		<hr>
<h3><strong>About You</strong></h3>
		<h4>Name (Required)</h4>
		<input type="text" name="" id="name" class="form-control" required>

		<h4>Link to Photo Image (Required)</h4>
		<input type="text" name="" id="photo" class="form-control" required>
		<hr>

		<h3><strong>Question 1</strong></h3>
		<h4>On a scale of 1 to 5, how much do you like to dance?</h4>
		<select data-placeholder="" class="chosen-select" id="q1">
	 		<option value=""></option>
            <option value="1">1 (I refuse)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Let me find my boogie shoes)</option>
      	</select>

		<h3><strong>Question 2</strong></h3>
		<h4>Your go to social media source is?</h4>
		<select data-placeholder="" class="chosen-select" id="q2">
	 		<option value=""></option>
            <option value="1">Twitter</option>
            <option value="2">Facebook</option>
            <option value="3">Snapchat</option>
            <option value="4">Tinder</option>
            <option value="5">Instagram</option>
      	</select>


		<h3><strong>Question 3</strong></h3>
		<h4>What's Your Favorite Animal?</h4>
		<select data-placeholder="" class="chosen-select" id="q3">
	 		<option value=""></option>
            <option value="1">Dog</option>
            <option value="2">Cat</option>
            <option value="3">Lion</option>
            <option value="4">Horse</option>
            <option value="5">Snake</option>
      	</select>


		<h3><strong>Question 4</strong></h3>
		<h4>You'd rather spend your time at:</h4>
		<select data-placeholder="" class="chosen-select" id="q4">
	 		<option value=""></option>
            <option value="1">Home</option>
            <option value="2">The Arcade</option>
            <option value="3">Online</option>
            <option value="4">Out on the Town</option>
            <option value="5">At the Beach</option>
      	</select>


		<h3><strong>Question 5</strong></h3>
		<h4>What is your favorite pizza topping</h4>
		<select data-placeholder="" class="chosen-select" id="q5">
	 		<option value=""></option>
            <option value="1">Cheese</option>
            <option value="2">Banana Peppers</option>
            <option value="3">Mushrooms</option>
            <option value="4">Pepperoni</option>
            <option value="5">Italian Sausage</option>
      	</select>


		<h3><strong>Question 6</strong></h3>
		<h4>If you could travel anywhere...</h4>
		<select data-placeholder="" class="chosen-select" id="q6">
	 		<option value=""></option>
            <option value="1">The Past</option>
            <option value="2">Wisconsin</option>
            <option value="3">France</option>
            <option value="4">Bali</option>
            <option value="5">The Future</option>
      	</select>


		<h3><strong>Question 7</strong></h3>
		<h4>What is your favorite color?</h4>
		<select data-placeholder="" class="chosen-select" id="q7">
	 		<option value=""></option>
            <option value="1">Yellow</option>
            <option value="2">Violet</option>
            <option value="3">Aqua</option>
            <option value="4">Grey</option>
            <option value="5">Ruby</option>
      	</select>

		<h3><strong>Question 8</strong></h3>
		<h4>What is your favorite music?</h4>
		<select data-placeholder="" class="chosen-select" id="q8">
	 		<option value=""></option>
            <option value="1">Country</option>
            <option value="2">Rock</option>
            <option value="3">Pop</option>
            <option value="4">Hip-Hop</option>
            <option value="5">World Music</option>
      	</select>

		<h3><strong>Question 9</strong></h3>
		<h4>What is your favorite outdoor activity</h4>
		<select data-placeholder="" class="chosen-select" id="q9">
	 		<option value=""></option>
            <option value="1">Skiiing</option>
            <option value="2">Golfing</option>
            <option value="3">Hiking</option>
            <option value="4">Fishing</option>
            <option value="5">Dining al fresco</option>
      	</select>

		<h3><strong>Question 10</strong></h3>
		<h4>What is the best TV show on this list?</h4>
		<select data-placeholder="" class="chosen-select" id="q10">
	 		<option value=""></option>
            <option value="1">Golden Girls</option>
            <option value="2">Frasier</option>
            <option value="3">The Bachelor</option>
            <option value="4">Law and Order SVU</option>
            <option value="5">Dr. Who</option>
      	</select>

		<br>
		<br>

		<!-- Submit Button -->
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
 Submit</button>

		<hr>
		<footer class="footer">
			<div class="container">
				<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/caseylholston/FriendFinder">GitHub Repo</a></p>
			</div>
		</footer>

	</div>

	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h2 class="modal-title"><strong>Closest Match</strong></h2>
				</div>
				<div class="modal-body">
					<h2 id="matchName"></h2>
					<img id="matchImg" src="#" alt="">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>

	<script type="text/javascript">
		// Chosen CSS
		var config = {
			'.chosen-select': {},
			'.chosen-select-deselect': {
				allow_single_deselect: true
			},
			'.chosen-select-no-single': {
				disable_search_threshold: 10
			},
			'.chosen-select-no-results': {
				no_results_text: 'Oops, nothing found!'
			},
			'.chosen-select-width': {
				width: "95%"
			}
		}
		for (var selector in config) {
			$(selector).chosen(config[selector]);
		}
		// Capture the form inputs 
		$("#submit").on("click", function () {
			// Form validation
			function validateForm() {
				var isValid = true;
				$('.form-control').each(function () {
					if ($(this).val() === '')
						isValid = false;
				});
				$('.chosen-select').each(function () {
					if ($(this).val() === "")
						isValid = false
				})
				return isValid;
			}
			// If all required fields are filled
			if (validateForm() == true) {
				// Create an object for the user's data
				var newFriend = {
					name: $("#name").val(),
					photo: $("#photo").val(),
					difference: "",
					scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $(
						"#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
				}
				// Grab the URL of the website
				var currentURL = window.location.origin;
				console.log(currentURL);
				// AJAX post the data to the friends API. 
				$.post(currentURL + "/add", newFriend, function (data) {
					console.log('im in the survey page:' + data);
					// Grab the result from the AJAX post so that the best match's name and photo are displayed.
					$("#matchName").text(data.name);
					$('#matchImg').attr("src", data.photo);
					
					// Show the modal with the best match 
					$("#resultsModal").modal('toggle');
				});
				
			} else {
				alert("Please fill out all fields before submitting!");
			}
			//console.log(newFriend);
			
			return false;
		});
	</script>

</body>

</html>